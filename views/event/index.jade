extends ../layout

block title
	title= event[0].ru.title.toUpperCase()

block content_style
	link(rel='stylesheet', type='text/css', href='/styles/event.css')

block content_scripts
	script(type='text/javascript', src='/scripts/event.js')

block content_right
	if (event[0].ru.ticket)
		.ticket
			!= event[0].ru.ticket

mixin memberList(marker, status)
	- var flag = false
	each member in event[0].members
		if (member.c_status == status)
			if (!flag)
				.marker= marker + ':'
			- flag = true
			b= member.m_id.ru.name
			br

block content
	img(src=event[0].photo)
	.calendar
		.inner
			each date,i in schedule
				- var days = ['ВС','ПН','ВТ','СР','ЧТ','ПТ','СБ'];
				- var d = date.date.getDate()
				if (d < 10)
					- d = '0' + d
				if (i == 0)
					.date.big= days[date.date.getDay()] + '.' + d
				else
					.date= days[date.date.getDay()] + '.' + d
	.event_body
		.title(lang='ru')= event[0].ru.title.toUpperCase()
		if (event[0].ru.s_title)
			.s_title= event[0].ru.s_title.toUpperCase()
		.members
			.column
				+memberList('режисер', 'director')
				+memberList('автор', 'author')
				+memberList('драматург', 'playwright')
			.column
				+memberList('фотограф', 'photographer')
				+memberList('драматург', 'playwright')
				//- +memberList('драматург', 'playwright')
			.column
				if (event[0].ru.comment)
					.desc
						!= event[0].ru.comment
		.description(lang='ru')
			!= event[0].ru.body